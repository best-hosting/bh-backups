---
# defaults file for bh-backups
install_path: '/etc'

default_rsync_filters: >-
  {{
      { 'root': lookup('file', 'templates/default_root_rsync_filter.yml')
      , 'home': lookup('file', 'templates/default_home_rsync_filter.yml')
      }
  }}

# Backup points definition.
# 'dst' - required. Destination directory name.
# 'src' - required. Source directory name.
#r_backups:
#  - name: 'root'
#    src:  '/'
#    dst:  'root'
#    rsync_filter: "{{ bh_root_rsync_filter }}"

bh_mysql_script: "{{ role_path + '/files/mysql.sh' }}"
bh_pgsql_script: "{{ role_path + '/files/pgsql.sh' }}"

# Backup scripts definition. Name must be unique in single r_backup_scripts
# list!
#r_backup_scripts:
#  - name:   'mysql'
#    password: 'pass'
#    script: "{{ bh_mysql_script }}"

# Root directory for all backups. This variable must be set for _backup
# server_.
#r_backup_root: '/var/cache/rsnapshot'

# Default database user name.
db_user: "{{ backup_server }}"

# Default database user password.
db_password: "{{ lookup('file', 'backup_mysql_' + inventory_hostname + '.password') }}"

r_sync:
  hour: 2
  minute: 30
r_weekly:
  hour: 2
  minute: 15
r_monthly:
  hour: 2
  minute: 0

# To recalculate values for backup point, remove it from cache file.
r_count_files: yes

# Percentage.
warn_files_count: 80
crit_files_count: 60
warn_files_count_diff: 10000
crit_files_count_diff: 40000

warn_size: 80
crit_size: 60
warn_size_diff: 10737418240
crit_size_diff: 42949672960

# Whether to install or uninstall rsnapshot configs. Note, that rsync filter
# library files, directories and all backup data will _not_ be uninstalled in
# any case.
run_mode: 'install'
